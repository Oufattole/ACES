# https://arxiv.org/pdf/1602.03686


predicates:
  age_between_50_and_85:
    code: ???
    value_min: 50
    value_max: 85
    ...
  HF_diagnostic_code:
    expr: or(...)
  valid_HF_diagnostic_event:
    expr: and(HF_diagnostic_code, age_between_50_and_85)

trigger_event: valid_HF_diagnostic_event

windows:
  yr_post_dx:
    start: trigger
    end: start + 1y
    start_inclusive: True
    end_inclusive: False
    has:
      HF_diagnostic_code: (3, None)
  input: 
    end: trigger
    start: trigger - 18m
    start_inclusive: True
    end_inclusive: False


######## CONTROLS (no matching yet; doesn't fit paper) #######

trigger_event: *

windows:
  pre_idx_date:
    start: None
    end: trigger
    has:
      HF_diagnostic_code: (None, 0)
  yr_post_idx_date:
    start: trigger
    end: start + 1y
    start_inclusive: True
    end_inclusive: False
    has:
      HF_diagnostic_code: (None, 1)
  input: 
    end: trigger
    start: trigger - 18m
    start_inclusive: True
    end_inclusive: False

